(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5de9"],{"010e":function(e,t,r){"use strict";var a=r("9d46"),o=r.n(a);o.a},"9d46":function(e,t,r){},d170:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[e.mainloader?r("div",{staticClass:"catgloader pageload"},[e._m(0)]):e._e(),e.hasShop?r("div",{staticClass:"white-bg borderdiv mrgb25"},[r("h2",{staticClass:"text-center mr0 addtitle"},[e._v("You had a Shop")]),r("br"),r("router-link",{attrs:{to:"/view-shop"}},[e._v("Go to your shop")])],1):r("div",{staticClass:"white-bg borderdiv mrgb25"},[r("h2",{staticClass:"text-center mr0 addtitle"},[e._v("Cr√©er un magasin")]),r("div",{staticClass:"addbx center-block"},[r("div",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Shop Name *",name:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),r("br"),""!=e.errorObj.name?r("alert",{attrs:{type:"danger"}},[e._v("\n                    "+e._s(e.errorObj.name)+"\n                ")]):e._e()],1),r("div",{staticClass:"form-group"},[r("label",[e._v("Select category")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedCatg,expression:"selectedCatg"}],staticClass:"form-control",on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedCatg=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:""}},[e._v("Select a category")]),e._l(e.listCatg,function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.title))])})],2),r("br"),""!=e.errorObj.category?r("alert",{attrs:{type:"danger"}},[e._v("\n                    "+e._s(e.errorObj.category)+"\n                ")]):e._e()],1),r("div",{staticClass:"form-group"},[r("label",[e._v("Shop details:")]),r("vue-editor",{attrs:{name:"Shop Description",editorToolbar:e.customToolbar},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),r("br"),""!=e.errorObj.description?r("alert",{attrs:{type:"danger"}},[e._v("\n                    "+e._s(e.errorObj.description)+"\n                ")]):e._e()],1),r("p",{staticClass:"adpara"},[e._v("Photos : Upload shop images")]),r("div",{staticClass:"clearfix row_12"},e._l(e.adImageHolder,function(t){return r("label",{key:t.id,staticClass:"pull-left"},[r("input",{staticClass:"hidden",attrs:{type:"file",name:"phonetype",disabled:t.disabled,accept:"image/x-png,image/jpeg"},on:{change:function(r){e.uploadAdImage(r,t.id)}}}),r("div",{staticClass:"chekphoto",staticStyle:{position:"relative"},attrs:{id:"adp-"+t.id}},[e._m(1,!0),t.disabled?r("a",{attrs:{href:"javascript:void(0);"},on:{click:function(r){e.removeImage(t.id)}}},[r("i",{staticClass:"fa fa-times-circle"})]):e._e(),e._l(t.data,function(t,a){return r("div",{key:a},[r("img",{staticClass:"img-responsive",attrs:{src:""+e.ad_image_url+t.save_name}})])}),r("div",{staticClass:"brwrap"},[r("span",{staticClass:"txttt"},[e._v(e._s(1==t.id?"Main Photo":"Photo "+t.id))]),e._m(2,!0)])],2)])})),r("br"),""!=e.errorObj.images?r("alert",{attrs:{type:"danger"}},[e._v("\n                "+e._s(e.errorObj.images)+"\n            ")]):e._e(),r("br"),r("div",{staticClass:"form-group"},[r("vue-google-autocomplete",{ref:"toAddress",attrs:{id:"map2",classname:"form-control",placeholder:"Start typing your address",country:"in"},on:{placechanged:e.getAddressData,inputChange:function(t){e.changeCity(t)}}}),r("br"),""!=e.errorObj.address?r("alert",{attrs:{type:"danger"}},[e._v("\n                    "+e._s(e.errorObj.address)+"\n                ")]):e._e()],1),r("div",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Telephone No.",name:""},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}}),r("br"),""!=e.errorObj.phone?r("alert",{attrs:{type:"danger"}},[e._v("\n                    "+e._s(e.errorObj.phone)+"\n                ")]):e._e()],1),r("div",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.siren,expression:"siren"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Siren",name:""},domProps:{value:e.siren},on:{input:function(t){t.target.composing||(e.siren=t.target.value)}}}),r("br"),""!=e.errorObj.siren?r("alert",{attrs:{type:"danger"}},[e._v("\n                    "+e._s(e.errorObj.siren)+"\n                ")]):e._e()],1),r("div",{staticClass:"form-group"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("label",[e._v("From timing:")]),r("vue-timepicker",{staticClass:"form-control",attrs:{format:"hh:mm"},model:{value:e.from_time,callback:function(t){e.from_time=t},expression:"from_time"}}),r("br"),""!=e.errorObj.from_time?r("alert",{attrs:{type:"danger"}},[e._v("\n                            "+e._s(e.errorObj.from_time)+"\n                        ")]):e._e()],1),r("div",{staticClass:"col-md-6"},[r("label",[e._v("To timing:")]),r("vue-timepicker",{staticClass:"form-control",attrs:{format:"hh:mm"},model:{value:e.to_time,callback:function(t){e.to_time=t},expression:"to_time"}}),r("br"),""!=e.errorObj.to_time?r("alert",{attrs:{type:"danger"}},[e._v("\n                            "+e._s(e.errorObj.to_time)+"\n                        ")]):e._e()],1)])]),r("div",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.website,expression:"website"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Put valid url wil http:// or https://",name:""},domProps:{value:e.website},on:{input:function(t){t.target.composing||(e.website=t.target.value)}}}),r("br"),""!=e.errorObj.website?r("alert",{attrs:{type:"danger"}},[e._v("\n                    "+e._s(e.errorObj.website)+"\n                ")]):e._e()],1),r("div",{staticClass:"clearfix"},[r("div",[e.updateBtn?r("input",{staticClass:"btn btn-md btn-warning",attrs:{type:"button",value:"Update Shop"},on:{click:e.updateShop}}):r("input",{staticClass:"btn btn-md btn-warning",attrs:{type:"button",value:"Create Shop"},on:{click:e.createShop}}),r("br"),r("br"),e.success?r("alert",{attrs:{title:"success!",type:"success",closable:!1}},[e._v("\n                        Well done! You successfully created your own shop\n                    ")]):e._e(),e.esuccess?r("alert",{attrs:{title:"success!",type:"success",closable:!1}},[e._v("\n                        Well done! You successfully updated your own shop\n                    ")]):e._e()],1)])],1)])])},o=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"lds-double-ring",staticStyle:{width:"100%",height:"100%"}},[r("div"),r("div")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"adploading"},[a("img",{attrs:{src:r("6348"),alt:"loading"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("img",{staticClass:"img-responsive",attrs:{src:"assets/images/addphoto.png"}})])}],s=(r("7514"),r("7f7f"),r("28a5"),r("ba6a")),i=r("db49"),n=r("b3e9"),d=r("0118"),c=r("517f"),l=r.n(c),m={name:"CreateShop",components:{VueEditor:n["VueEditor"],VueGoogleAutocomplete:d["a"],VueTimepicker:l.a},data:function(){return{name:"",description:"",address:"",phone:"",siren:"",from_time:{hh:"",mm:""},to_time:{hh:"",mm:""},website:"",ad_image_url:i["a"].shop_images,success:!1,esuccess:!1,customToolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}]],adImageHolder:[{id:1,data:[],disabled:!1},{id:2,data:[],disabled:!1},{id:3,data:[],disabled:!1}],errorObj:{name:"",description:"",images:"",address:"",phone:"",siren:"",from_time:"",to_time:"",category:"",website:""},mainloader:!0,hasShop:!1,selectedCatg:"",listCatg:[],updateBtn:!1}},created:function(){var e=this;"edit-shop"==location.pathname.split("/")[1]?(this.mainloader=!0,this.catgList(),this.getEditValues()):s["b"].get("checkShop?api_token=".concat(s["c"])).then(function(t){1==t.data.shopExist?e.$router.push("view-shop"):(e.hasShop=!1,e.catgList()),e.mainloader=!1}).catch(function(e){console.log(e)})},methods:{removeImage:function(e){this.adImageHolder.filter(function(t){t.id==e&&(t.data=[],t.disabled=!1)})},getEditValues:function(){var e=this,t=this.$route.query.tok_id;this.updateBtn=!0,s["b"].get("shops?api_token=".concat(t)).then(function(t){e.name=t.data.name,e.selectedCatg=1*t.data.category,e.description=t.data.description,e.address=t.data.address,setTimeout(function(){$("#map2").val(e.address)},500),e.phone=t.data.phone,e.siren=t.data.siren,e.website=t.data.website,e.from_time={hh:t.data.from_time.split(":")[0],mm:t.data.from_time.split(":")[1]},e.to_time={hh:t.data.to_time.split(":")[0],mm:t.data.to_time.split(":")[1]};var r=t.data.photos;r.map(function(t,r){e.adImageHolder[r].data.push(t),e.adImageHolder[r].disabled=!0}),e.mainloader=!1}).catch(function(e){console.log(e)})},uploadAdImage:function(e,t){var r=this,a=new FormData,o=e.target.files[0];a.append("image",o),$("#adp-".concat(t)).find(".adploading").addClass("active"),s["b"].post("upload-shop-image?api_token=".concat(s["c"]),a).then(function(e){var a=e.data;0==r.adImageHolder[0].data.length?(r.adImageHolder[0].data.push(a),r.adImageHolder[0].disabled=!0):r.adImageHolder.filter(function(e){e.id==t&&(e.data.push(a),e.disabled=!0)}),$(".adploading").removeClass("active")}).catch(function(e){console.log(e),alert("Something went wrong!"),$(".adploading").removeClass("active")})},getAddressData:function(e,t,r){this.address=t.formatted_address},changeCity:function(e){0==e.newVal.length&&(this.address="")},createShop:function(){var e=this,t={name:this.name,description:this.description,address:this.address,phone:this.phone,siren:this.siren,from_time:"",to_time:"",website:this.website,images:[],category:this.selectedCatg};this.adImageHolder.map(function(e){e.data.map(function(e){return t.images.push(e)})}),t.from_time="".concat(this.from_time.hh,":").concat(this.from_time.mm),t.to_time="".concat(this.to_time.hh,":").concat(this.to_time.mm),s["b"].post("shops?api_token=".concat(s["c"]),t).then(function(t){"fail"==t.data.status?(e.errorObj.name=void 0==t.data.errors.name?"":t.data.errors.name[0],e.errorObj.description=void 0==t.data.errors.description?"":t.data.errors.description[0],e.errorObj.address=void 0==t.data.errors.address?"":t.data.errors.address[0],e.errorObj.phone=void 0==t.data.errors.phone?"":t.data.errors.phone[0],e.errorObj.siren=void 0==t.data.errors.siren?"":t.data.errors.siren[0],e.errorObj.from_time=void 0==t.data.errors.from_time?"":t.data.errors.from_time[0],e.errorObj.to_time=void 0==t.data.errors.to_time?"":t.data.errors.to_time[0],e.errorObj.images=void 0==t.data.errors.images?"":t.data.errors.images[0],e.errorObj.category=void 0==t.data.errors.category?"":t.data.errors.category[0],e.errorObj.website=void 0==t.data.errors.website?"":t.data.errors.website[0],window.scrollTo(0,0)):(e.errorObj.name="",e.errorObj.description="",e.errorObj.address="",e.errorObj.phone="",e.errorObj.siren="",e.errorObj.from_time="",e.errorObj.to_time="",e.errorObj.images="",e.errorObj.category="",e.errorObj.website="",e.success=!0,setTimeout(function(){e.$router.push("view-shop")},2e3))}).catch(function(e){console.log(e),alert("Something went wrong!")})},updateShop:function(){var e=this,t={name:this.name,description:this.description,address:this.address,phone:this.phone,siren:this.siren,from_time:"",to_time:"",website:this.website,images:[],category:this.selectedCatg};this.adImageHolder.map(function(e){e.data.map(function(e){return t.images.push(e)})}),t.from_time="".concat(this.from_time.hh,":").concat(this.from_time.mm),t.to_time="".concat(this.to_time.hh,":").concat(this.to_time.mm),s["b"].put("shops/".concat(this.$route.query.shp,"?api_token=").concat(s["c"]),t).then(function(t){"fail"==t.data.status?(e.errorObj.name=void 0==t.data.errors.name?"":t.data.errors.name[0],e.errorObj.description=void 0==t.data.errors.description?"":t.data.errors.description[0],e.errorObj.address=void 0==t.data.errors.address?"":t.data.errors.address[0],e.errorObj.phone=void 0==t.data.errors.phone?"":t.data.errors.phone[0],e.errorObj.siren=void 0==t.data.errors.siren?"":t.data.errors.siren[0],e.errorObj.from_time=void 0==t.data.errors.from_time?"":t.data.errors.from_time[0],e.errorObj.to_time=void 0==t.data.errors.to_time?"":t.data.errors.to_time[0],e.errorObj.images=void 0==t.data.errors.images?"":t.data.errors.images[0],e.errorObj.category=void 0==t.data.errors.category?"":t.data.errors.category[0],window.scrollTo(0,0)):(e.errorObj.name="",e.errorObj.description="",e.errorObj.address="",e.errorObj.phone="",e.errorObj.siren="",e.errorObj.from_time="",e.errorObj.to_time="",e.errorObj.images="",e.errorObj.category="",e.esuccess=!0,setTimeout(function(){e.$router.push("view-shop")},2e3))}).catch(function(e){console.log(e),alert("Something went wrong!")})},catgList:function(){var e=this;s["b"].post("categories?api_token=".concat(s["c"]),{parent_id:0}).then(function(t){e.listCatg=t.data.categories}).catch(function(e){console.log(e)})}}},p=m,u=(r("010e"),r("2877")),h=Object(u["a"])(p,a,o,!1,null,"3a2684a8",null);t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-5de9.db0f276a.js.map